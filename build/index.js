/*!
 * 
 *   @hodgef/ts-library-boilerplate-basic v1.0.129
 *   https://github.com/hodgef/ts-library-boilerplate-basic
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MyLibrary=e():r.MyLibrary=e()}(self,(function(){return(()=>{"use strict";var r,e,n,t={d:(r,e)=>{for(var n in e)t.o(e,n)&&!t.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},o:(r,e)=>Object.prototype.hasOwnProperty.call(r,e),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},o={};function a(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.push.apply(n,t)}return n}function i(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(r,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}function u(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function c(r){return function(r){if(Array.isArray(r))return s(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||l(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(r,e){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=l(r))||e&&r&&"number"==typeof r.length){n&&(r=n);var t=0,o=function(){};return{s:o,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return i=r.done,r},e:function(r){u=!0,a=r},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function l(r,e){if(r){if("string"==typeof r)return s(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(r,e):void 0}}function s(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function y(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function d(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}t.r(o),t.d(o,{Suit:()=>r,Rank:()=>e,CardSequenceKind:()=>n,Play:()=>p,Card:()=>h,Player:()=>v,Round:()=>O,GameState:()=>b,createDeck:()=>S,getPlayersCards:()=>j,getNextPlayer:()=>k,findRuns:()=>T,transitionState:()=>R}),function(r){r.Hearts="hearts",r.Diamonds="diamonds",r.Clubs="clubs",r.Spades="spades"}(r||(r={})),function(r){r[r.Two=13]="Two",r[r.Ace=12]="Ace",r[r.King=11]="King",r[r.Queen=10]="Queen",r[r.Jack=9]="Jack",r[r.Ten=8]="Ten",r[r.Nine=7]="Nine",r[r.Eight=6]="Eight",r[r.Seven=5]="Seven",r[r.Six=4]="Six",r[r.Five=3]="Five",r[r.Four=2]="Four",r[r.Three=1]="Three"}(e||(e={})),function(r){r.None="none",r.OneOfAKind="one of a kind",r.TwoOfAKind="two of a kind",r.ThreeOfAKind="three of a kind",r.FourOfAKind="four of a kind",r.RunOfThree="run of three",r.RunOfFour="run of four",r.RunOfFive="run of five",r.RunOfSix="run of six",r.RunOfSeven="run of seven",r.RunOfEight="run of eight",r.RunOfNine="run of nine",r.RunOfTen="run of ten",r.RunOfEleven="run of eleven",r.RunOfTwelve="run of twelve",r.RunOfThirteen="run of thirteen",r.RunOfThreePairs="run of three pairs",r.RunOfFourPairs="run of four pairs",r.RunOfFivePairs="run of five pairs",r.RunOfSixPairs="run of six pairs",r.RunOfThreeTriples="run of three triples",r.RunOfFourTriples="run of four triples"}(n||(n={}));var p=function r(e,n){d(this,r),this.player=e,this.cards=n},h=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.Ace,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Hearts;d(this,n),this.rank=t,this.suit=o}var t,o,a;return t=n,(o=[{key:"toString",value:function(){return"".concat(this.rank," of ").concat(this.suit)}}])&&y(t.prototype,o),a&&y(t,a),n}(),v=function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;d(this,r),this.name=e,this.order=n,this.cards=t},O=function r(e,n,t,o){d(this,r),this.currentPlayer=e,this.activePlayers=n,this.outPlayers=t,this.cards=o},b=function r(e,n,t,o,a,i){d(this,r),this.currentPlayer=e,this.discardPile=n,this.playersIn=t,this.playersOut=o,this.message=a,this.error=i};function g(r,e){return r.rank>e.rank?1:r.rank<e.rank?-1:0}function m(r,e){return r.order>e.order?1:r.order<e.order?-1:0}function P(r,e){if(e.length>4||e.length<2)throw new Error("invalid Player length");!function(r){for(var e,n=r.length;0!==n;){e=Math.floor(Math.random()*n),n--;var t=[r[e],r[n]];r[n]=t[0],r[e]=t[1]}}(r),e.forEach((function(e){return e.cards=r.splice(0,13)}))}function w(r){return Object.keys(r).filter((function(r){return Number.isNaN(+r)}))}function S(){var n,t=[],o=f(w(r));try{for(o.s();!(n=o.n()).done;){var a,i=n.value,u=f(w(e));try{for(u.s();!(a=u.n()).done;){var c=a.value;t.push({suit:r[i],rank:e[c]})}}catch(r){u.e(r)}finally{u.f()}}}catch(r){o.e(r)}finally{o.f()}return t}function j(r){return r.map((function(r){return r.cards})).reduce((function(r,e){return[].concat(c(r),c(e))}))}function k(r,e){var n=c(e).sort(m).indexOf(r);if(-1===n)throw new Error("Player not found");return n===e.length-1?e[0]:e[n+1]}function T(r){var e=c(r).sort(g),n=[],t=[n];return e.forEach((function(r){0===n.length||n[n.length-1].rank+1===r.rank?n.push(r):(t.push(n),n=[r])})),t}function I(r,e){return e.forEach((function(e){var n=r.cards.indexOf(e);if(!(n>-1))throw new Error("Player does not have card ".concat(e));r.cards.splice(n,1)})),e}function R(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!r){var n=[new v("a",0),new v("a",1),new v("a",2),new v("a",3)],t={error:"",discardPile:[],currentPlayer:n[0],playersIn:n,playersOut:[],message:"New Game! Waiting on ".concat(n[0])};return P(S(),t.playersIn),t}if(r.currentPlayer!==e.player)return i(i({},r),{},{error:"It is not ".concat(e.player.name,"'s turn. It is ").concat(r.currentPlayer.name,"'s turn.")});if(!e.cards){var o=i(i({},r),{},{error:"",playersIn:r.playersIn.filter((function(r){return r!==e.player})),playersOut:[].concat(c(r.playersOut),[e.player])});return o.currentPlayer=k(e.player,o.playersIn),o.message="".concat(e.player.name," passes. Waiting on ").concat(o.currentPlayer.name),o}if(1===r.playersIn.length&&0===j([].concat(c(r.playersIn),c(r.playersOut))).length){var a=i(i({},r),{},{error:"",discardPile:[].concat(c(r.discardPile),[I(e.player,e.cards)]),playersIn:r.playersIn.filter((function(r){return r!==e.player})),playersOut:[].concat(c(r.playersOut),[e.player]),message:"".concat(e.player.name," won!")});return a}if(1===r.playersIn.length){var u=i(i({},r),{},{error:"",discardPile:[].concat(c(r.discardPile),[I(e.player,e.cards)]),currentPlayer:e.player,playersIn:[r.currentPlayer].concat(c(r.playersOut)),playersOut:[]});return u.message="".concat(e.player.name," won round. Waiting on ").concat(u.currentPlayer.name," to start new round."),u}var f=i(i({},r),{},{error:"",discardPile:[].concat(c(r.discardPile),[I(e.player,e.cards)]),currentPlayer:k(e.player,r.playersIn)});return f}return o})()}));
//# sourceMappingURL=index.js.map